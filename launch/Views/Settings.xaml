<Page x:Class="launch.Views.Settings"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:launch.Views"
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="880"
      Title="Settings">

    <Grid>
        <Grid Background="{StaticResource BG}" Panel.ZIndex="0">
            <Grid.Effect>
                <BlurEffect Radius="5"/>
            </Grid.Effect>
        </Grid>

        <Border Background="#8B2B8B" Opacity="0.5" Margin="80 120 80 90" Panel.ZIndex="0"/>
        <StackPanel>
            <StackPanel Margin="80 60 110 0" HorizontalAlignment="Left" Orientation="Horizontal">
                <RadioButton Name="BtnGameSettings" Visibility="Visible" Click="BtnGameSettings_Click" Content="настройки игры" Style="{StaticResource radioBtn}" Width="250" Height="50"/>
                <RadioButton Name="BtnModSettings" Visibility="Visible" Click="BtnModSettings_Click" Content="настройки модов" Style="{StaticResource radioBtn}" Width="250" Height="50" Margin="20 0 0 0"/>
            </StackPanel>
            <Grid>
                <!--<TextBlock Text="настройки игры" FontSize="40" Height="50" Style="{StaticResource BtnText}" HorizontalAlignment="Center" VerticalAlignment="Top"/>-->
                <StackPanel Name="gameSettingsPage" Margin="110 40 110 120" Visibility="Visible">
                    <StackPanel Orientation="Horizontal" >
                        <TextBlock Text="Директория: " Style="{StaticResource BtnText}" Margin="10"/>
                        <TextBox IsReadOnly="True" Opacity="0.7" Name="directoryTB" Width="400" Style="{StaticResource TextBox}" Margin="28 0 0 0"/>
                        <Button Name="btnViewFile" Click="btnViewFile_Click" Style="{StaticResource ImageBtn}" Template="{StaticResource btn}" Width="40" Margin="10 12 12 12">
                            <Button.Resources>
                                <ImageSource x:Key="Img">Images/BtnSearch.png</ImageSource>
                                <ImageSource x:Key="ImgTrig">Images/BtnSearchTrig.png</ImageSource>
                            </Button.Resources>
                        </Button>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Разрешение: " Style="{StaticResource BtnText}" Margin="10"/>
                        <TextBox TextChanged="text_TextChanged" Name="widthTB" Width="195" Style="{StaticResource TextBox}" Margin="30 0 0 0"  MaxLength="4"/>
                        <TextBlock Text="x" Style="{StaticResource BtnText}" Margin="22 0 0 0" VerticalAlignment="Center"/>
                        <TextBox TextChanged="text_TextChanged" Name="heightTB" Width="195" Style="{StaticResource TextBox}" Margin="20 0 0 0" MaxLength="4"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Полноэкранный режим: " Style="{StaticResource BtnText}" Margin="10"/>
                        <Viewbox Width="40" Height="35">
                            <CheckBox Name="btnFullScreen" Style="{StaticResource checkBox}"/>
                        </Viewbox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Память: " Style="{StaticResource BtnText}" Margin="10"/>
                        <Slider Name="memorySlider" ValueChanged="memorySlider_ValueChanged" Width="400" Height="30" Margin="10"/>
                        <TextBox Name="memoryTB" IsReadOnly="True" Opacity="0.7" Width="110" Style="{StaticResource TextBox}" Margin="5 0 0 0"/>
                    </StackPanel>
                    <Grid Margin="5 35 5 5">
                        <Button Name="btnReset" Click="btnReset_Click" Content="сбросить" Style="{StaticResource ImageButton}" HorizontalAlignment="Left"/>
                        <Button Name="btnSave" Click="btnSave_Click" Content="сохранить" Style="{StaticResource ImageButton}" HorizontalAlignment="Right"/>
                    </Grid>
                </StackPanel>
                <StackPanel Name="modSettingsPage" Margin="110 30 110 120" Visibility="Hidden">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300" />
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="300"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <Border Background="White" Width="5" Height="290" HorizontalAlignment="Right" VerticalAlignment="Top"/>

                        <!-- Список версий -->
                        <StackPanel Width="290" HorizontalAlignment="Left">
                            <TextBlock Text="Версии" Style="{StaticResource BtnText}" FontSize="38" HorizontalAlignment="Left"/>
                            <ScrollViewer Name="ScrollViewerVer" Height="255" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" Margin="0 5 0 0">
                                <ItemsControl ItemsSource="{Binding ModPacks}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <RadioButton 
                Content="{Binding Name}" 
                GroupName="ModPacks"
                IsChecked="{Binding IsSelected, Mode=TwoWay}"
                Style="{StaticResource radioBtn}" FontSize="20"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>

                        <!-- Список модов -->
                        <StackPanel Grid.Column="1" Margin="10 0 0 0">
                            <TextBlock Text="Моды" Style="{StaticResource BtnText}" FontSize="38"/>
                            <ScrollViewer Height="260" VerticalScrollBarVisibility="Hidden">
                                <ItemsControl ItemsSource="{Binding SelectedModPack.Mods}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Margin="0 5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Text="{Binding Name}" 
                                           Style="{StaticResource BtnText}"
                                           VerticalAlignment="Center" FontSize="20">
                                                    <TextBlock.ToolTip>
                                                        <ToolTip Placement="Left" PlacementRectangle="-5,-5,0,0" VerticalOffset="-5" Background="#8B2B8B" BorderBrush="White" BorderThickness="3">
                                                            <TextBlock FontSize="20" Text="{Binding Name}" Style="{StaticResource BtnText}"/>
                                                        </ToolTip>
                                                    </TextBlock.ToolTip>
                                                </TextBlock>

                                                <CheckBox Grid.Column="1"
                                          IsChecked="{Binding IsEnabled, Mode=TwoWay}"
                                          VerticalAlignment="Center" Style="{StaticResource checkBox}"
                                          Margin="10 0 0 0"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>
                    </Grid>

                    <!-- Кнопки управления -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 0 0 0">
                        <Button Content="применить" Command="{Binding ApplyModsCommand}" Style="{StaticResource ImageButton}" Margin="0 0 20 0"/>
                        <Button Content="сбросить" Command="{Binding SaveModsCommand}" Style="{StaticResource ImageButton}"/>
                    </StackPanel>
                </StackPanel>
                <!--<Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300" />
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="350"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <Border Background="White"  Width="5" Height="330"  HorizontalAlignment="Right"  VerticalAlignment="Top"/>
                        <StackPanel>
                            <TextBlock Text="Версии" Style="{StaticResource BtnText}" FontSize="38" HorizontalAlignment="Left"/>
                            <ScrollViewer Name="ScrollViewerVer" Height="290" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" Margin="0 5 0 0">
                                <StackPanel>
                                    <TextBlock Text="Летний сезон 1.20.1" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                    <TextBlock Text="Зимний сезон 1.20.1" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                    <TextBlock Text="Хэллоуин 1.20.1" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                    <TextBlock Text="Весенний сезон 1.20.1" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </ScrollViewer>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="10 0 0 0">
                            <TextBlock Text="Моды" Style="{StaticResource BtnText}" FontSize="38" HorizontalAlignment="Left"/>
                            <ScrollViewer Name="ScrollViewerMod" Height="290" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
                                <StackPanel>
                                    <Grid>
                                        <TextBlock Text="customBoss" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                        <Viewbox Width="40" Height="35" HorizontalAlignment="Right">
                                            <CheckBox  Style="{StaticResource checkBox}"/>
                                        </Viewbox>
                                    </Grid>
                                    <Grid>
                                        <TextBlock Text="Particul" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                        <Viewbox Width="40" Height="35" HorizontalAlignment="Right">
                                            <CheckBox  Style="{StaticResource checkBox}"/>
                                        </Viewbox>
                                    </Grid>
                                    <Grid>
                                        <TextBlock Text="Lool" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                        <Viewbox Width="40" Height="35" HorizontalAlignment="Right">
                                            <CheckBox  Style="{StaticResource checkBox}"/>
                                        </Viewbox>
                                    </Grid>
                                    <Grid>
                                        <TextBlock Text="LoopingPool" Style="{StaticResource BtnText}" HorizontalAlignment="Left"/>
                                        <Viewbox Width="40" Height="35" HorizontalAlignment="Right">
                                            <CheckBox  Style="{StaticResource checkBox}"/>
                                        </Viewbox>
                                    </Grid>
                                </StackPanel>
                            </ScrollViewer>
                        </StackPanel>
                    </Grid>-->
                    
                
            </Grid>
        </StackPanel>
        <Border Visibility="Hidden" Name="errorMessage" Margin="80 0" Height="50" VerticalAlignment="Bottom" BorderBrush="White" BorderThickness="4" Background="Transparent">
            <TextBlock Name="textErrMes" Padding="17 5 0 0" Text="пароли не совпадают !" Style="{StaticResource BtnText}"/>
        </Border>
    </Grid>
</Page>
